<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Todos os Parlamentares | Scrivi Italia</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="header-placeholder"></div>

  <main class="container">
    <div class="intro">
      <h1>Todos os Parlamentares</h1>
      <p>Veja o nÃºmero total de senadores e deputados italianos com opÃ§Ã£o para copiar os emails para envio em massa.</p>
    </div>

    <table>
      <thead>
        <tr>
          <th>Cargo</th>
          <th>Total</th>
          <th>AÃ§Ã£o</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Senadores</td>
          <td id="total-senadores">â€“</td>
          <td><button onclick="copiarEmails('senadores')">Copiar emails</button></td>
        </tr>
        <tr>
          <td>Deputados</td>
          <td id="total-deputados">â€“</td>
          <td><button onclick="copiarEmails('deputados')">Copiar emails</button></td>
        </tr>
        <tr>
          <td>Total de parlamentares</td>
          <td id="total-parlamentares">â€“</td>
          <td><button onclick="copiarEmails('todos')">Copiar todos</button></td>
        </tr>
      </tbody>
    </table>

    <div class="alert-box" style="margin-top: 2rem;">
      <p><strong>ðŸ“Œ Importante:</strong> ao colar os emails no seu cliente de email (Gmail, Outlook, etc.), use o campo <strong>Cco</strong> (CÃ³pia Oculta).</p>
      <ul>
        <li>ðŸ”’ Garante a privacidade entre os destinatÃ¡rios.</li>
        <li>ðŸ“¬ Reduz a chance de ser marcado como spam.</li>
      </ul>
    </div>
  </main>

  <div id="footer-placeholder"></div>

  <!-- Modal simples -->
  <div id="modal" class="modal">
    <div class="modal-content">
      <span class="close-button" onclick="fecharModal()">&times;</span>
      <h2>ðŸ“‹ Emails copiados!</h2>
      <p>VocÃª pode colar os emails no campo <strong>Cco</strong> do seu programa de email.</p>
    </div>
  </div>

  <script>
    let senadores = [];
    let deputados = [];

    document.addEventListener("DOMContentLoaded", () => {
      fetch("header.html")
        .then(res => res.text())
        .then(data => document.getElementById("header-placeholder").innerHTML = data);

      fetch("footer.html")
        .then(res => res.text())
        .then(data => document.getElementById("footer-placeholder").innerHTML = data);

      carregarDados();
    });

    async function carregarDados() {
      try {
        const [senRes, depRes] = await Promise.all([
          fetch("senadores_italianos.json"),
          fetch("deputados_italianos.json")
        ]);
        senadores = await senRes.json();
        deputados = await depRes.json();

        document.getElementById("total-senadores").innerText = senadores.length;
        document.getElementById("total-deputados").innerText = deputados.length;
        document.getElementById("total-parlamentares").innerText = senadores.length + deputados.length;
      } catch (err) {
        console.error("Erro ao carregar dados:", err);
      }
    }

    function copiarEmails(tipo) {
      let lista = [];

      if (tipo === "senadores" || tipo === "todos") {
        lista = lista.concat(senadores.filter(p => p.email && p.nome_completo).map(p => `${p.nome_completo} <${p.email}>`));
      }
      if (tipo === "deputados" || tipo === "todos") {
        lista = lista.concat(deputados.filter(p => p.email && p.nome_completo).map(p => `${p.nome_completo} <${p.email}>`));
      }

      const texto = lista.join(", ");
      navigator.clipboard.writeText(texto).then(() => {
        document.getElementById("modal").style.display = "block";
      });
    }

    function fecharModal() {
      document.getElementById("modal").style.display = "none";
    }
  </script>
</body>
</html>

